<!-- å¢å¼ºç‰ˆè§†å·®æ²‰æµ¸Banner Header -->
<div class="relative min-h-screen overflow-hidden mt-[-50px] z-10" x-data="headerController()">
    <!-- å­—ä½“æŒ‰éœ€åŠ è½½è„šæœ¬ -->
    <script th:inline="javascript">
        (function () {
            // è·å–å½“å‰ä½¿ç”¨çš„å­—ä½“è®¾ç½®
            const titleFont = /*[[${theme.config.index.title_settings.title_font}]]*/ 'font-default';
            const subtitleFont = /*[[${theme.config.index.subtitle_settings.subtitle_font}]]*/ 'font-default';

            // å·²åŠ è½½çš„å­—ä½“è·Ÿè¸ª
            const loadedFonts = {};

            // åŠ è½½å­—ä½“çš„å‡½æ•°
            function loadFont(fontName, fontPath) {
                if (loadedFonts[fontName]) return; // é¿å…é‡å¤åŠ è½½

                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = fontPath;
                document.head.appendChild(link);
                loadedFonts[fontName] = true;
                console.log(`å·²åŠ è½½${fontName}å­—ä½“`);
            }

            // æ ¹æ®ä¸»æ ‡é¢˜å­—ä½“åŠ è½½
            if (titleFont === 'font-lxgw-wenkai-bright') {
                loadFont('éœé¹œæ–‡æ¥·äº®', '/themes/theme-sky-blog-1/assets/fonts/LXGWBright-SemiLight/result.css');
            }
            else if (titleFont === 'font-siyuan-songti') {
                loadFont('æ€æºå±æ˜¾è‡»å®‹', '/themes/theme-sky-blog-1/assets/fonts/æ€æºå±æ˜¾è‡»å®‹/result.css');
            }

            // æ ¹æ®å‰¯æ ‡é¢˜å­—ä½“åŠ è½½
            if (subtitleFont === 'font-lxgw-wenkai-bright') {
                loadFont('éœé¹œæ–‡æ¥·äº®', '/themes/theme-sky-blog-1/assets/fonts/LXGWBright-SemiLight/result.css');
            }
            else if (subtitleFont === 'font-siyuan-songti') {
                loadFont('æ€æºå±æ˜¾è‡»å®‹', '/themes/theme-sky-blog-1/assets/fonts/æ€æºå±æ˜¾è‡»å®‹/result.css');
            }

            // è‹±æ–‡å­—ä½“å’Œé»˜è®¤å­—ä½“å·²åœ¨åŸºç¡€CSSä¸­åŠ è½½ï¼Œæ— éœ€åŠ¨æ€å¤„ç†
        })();
    </script>
    <!-- èƒŒæ™¯å±‚ï¼šå›¾ç‰‡BannerèƒŒæ™¯ -->
    <div class="absolute inset-0 z-0" th:if="${theme.config.index.background_settings.show_background}">
        <!-- ç¬¬ä¸€å±‚ï¼šåŸå§‹å›¾ç‰‡èƒŒæ™¯ -->
        <img class="absolute inset-0 w-full h-full object-cover transition-all duration-1000 filter blur-[0.5px]"
            th:src="${theme.config.index.background_settings.background_image}" alt="èƒŒæ™¯å›¾ç‰‡">

        <!-- ç¬¬äºŒå±‚ï¼šç»„åˆè’™ç‰ˆå®¹å™¨ -->
        <div class="absolute inset-0">
            <!-- é»˜è®¤åŸºç¡€è’™ç‰ˆ + æ¸å˜è’™ç‰ˆç»„åˆ -->
            <div class="absolute inset-0 bg-black/30 bg-gradient-to-b from-black/10 via-black/50 to-black/80"></div>

            <!-- æ»šåŠ¨æ·±é‚ƒæ•ˆæœè’™ç‰ˆ -->
            <div class="absolute inset-0 bg-black transition-opacity duration-500"
                :style="`opacity: ${scrolled ? 0.4 : 0.1}`">
            </div>
        </div>
    </div>

    <!-- è§†è§‰éœ‡æ’¼åŠ¨æ€èƒŒæ™¯å±‚ï¼šå½“éšè—å›¾ç‰‡èƒŒæ™¯æ—¶æ˜¾ç¤º -->
    <div class="absolute inset-0 z-0 overflow-hidden"
        th:unless="${theme.config.index.background_settings.show_background}">
        <!-- ç¬¬ä¸€å±‚ï¼šæ™ºèƒ½ä¸»é¢˜é€‚é…æ¸å˜åŸºåº• -->
        <div class="absolute inset-0 theme-adaptive-base"></div>

        <!-- ç¬¬äºŒå±‚ï¼šåŠ¨æ€è‰²å½©æµåŠ¨èƒŒæ™¯ -->
        <div class="absolute inset-0 dynamic-gradient-bg theme-adaptive-opacity"></div>

        <!-- ç¬¬ä¸‰å±‚ï¼šç²’å­å¼•åŠ›ç³»ç»Ÿ -->
        <div class="absolute inset-0 particle-system">
            <!-- ä¸»è¦ç²’å­ç¾¤ -->
            <div class="particle-cluster particle-cluster-1">
                <div class="particle particle-large particle-blue"></div>
                <div class="particle particle-medium particle-purple"></div>
                <div class="particle particle-small particle-cyan"></div>
                <div class="particle particle-tiny particle-white"></div>
            </div>

            <div class="particle-cluster particle-cluster-2">
                <div class="particle particle-large particle-purple"></div>
                <div class="particle particle-medium particle-cyan"></div>
                <div class="particle particle-small particle-blue"></div>
                <div class="particle particle-tiny particle-white"></div>
            </div>

            <div class="particle-cluster particle-cluster-3">
                <div class="particle particle-large particle-cyan"></div>
                <div class="particle particle-medium particle-blue"></div>
                <div class="particle particle-small particle-purple"></div>
                <div class="particle particle-tiny particle-white"></div>
            </div>

            <!-- è¿æ¥çº¿ç³»ç»Ÿ -->
            <svg class="absolute inset-0 w-full h-full particle-connections" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="connection-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.4" />
                        <stop offset="50%" style="stop-color:#8b5cf6;stop-opacity:0.6" />
                        <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:0.4" />
                    </linearGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="2" result="coloredBlur" />
                        <feMerge>
                            <feMergeNode in="coloredBlur" />
                            <feMergeNode in="SourceGraphic" />
                        </feMerge>
                    </filter>
                </defs>

                <!-- åŠ¨æ€è¿æ¥çº¿ -->
                <path class="connection-line connection-line-1" stroke="url(#connection-gradient)" stroke-width="1"
                    fill="none" filter="url(#glow)"></path>
                <path class="connection-line connection-line-2" stroke="url(#connection-gradient)" stroke-width="0.8"
                    fill="none" filter="url(#glow)"></path>
                <path class="connection-line connection-line-3" stroke="url(#connection-gradient)" stroke-width="0.6"
                    fill="none" filter="url(#glow)"></path>
            </svg>
        </div>

        <!-- ç¬¬å››å±‚ï¼šå¤šå±‚è§†å·®å‡ ä½• -->
        <div class="absolute inset-0 parallax-geometry">
            <!-- è¿œæ™¯å±‚ -->
            <div class="parallax-layer parallax-far">
                <div class="geometric-shape geo-hexagon geo-far-1"></div>
                <div class="geometric-shape geo-triangle geo-far-2"></div>
                <div class="geometric-shape geo-circle geo-far-3"></div>
            </div>

            <!-- ä¸­æ™¯å±‚ -->
            <div class="parallax-layer parallax-mid">
                <div class="geometric-shape geo-diamond geo-mid-1"></div>
                <div class="geometric-shape geo-pentagon geo-mid-2"></div>
                <div class="geometric-shape geo-star geo-mid-3"></div>
            </div>

            <!-- è¿‘æ™¯å±‚ -->
            <div class="parallax-layer parallax-near">
                <div class="geometric-shape geo-square geo-near-1"></div>
                <div class="geometric-shape geo-octagon geo-near-2"></div>
            </div>
        </div>

        <!-- ç¬¬äº”å±‚ï¼šå…‰æ•ˆç³»ç»Ÿ -->
        <div class="absolute inset-0 light-effects">
            <!-- ä¸»å…‰æº -->
            <div class="light-source light-primary"></div>
            <div class="light-source light-secondary"></div>
            <div class="light-source light-accent"></div>

            <!-- å…‰æŸæ•ˆæœ -->
            <div class="light-beam light-beam-1"></div>
            <div class="light-beam light-beam-2"></div>
            <div class="light-beam light-beam-3"></div>
        </div>

        <!-- ç¬¬å…­å±‚ï¼šæ·±åº¦è’™ç‰ˆ -->
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/10 to-black/40"></div>

        <!-- ç¬¬ä¸ƒå±‚ï¼šæ»šåŠ¨äº¤äº’è’™ç‰ˆ -->
        <div class="absolute inset-0 bg-black transition-opacity duration-700 ease-out"
            :style="`opacity: ${scrolled ? 0.25 : 0.02}`">
        </div>
    </div>

    <!-- ä¸­å±‚ï¼šæ ‡é¢˜å†…å®¹ -->
    <div class="relative z-20 flex flex-col items-center justify-center min-h-screen px-4 text-center"
        :style="`transform: translateY(${scrollOffset * 0.3}px); opacity: ${1 - scrollOffset * 0.001}`">

        <!-- ä¸»æ ‡é¢˜ - å¢å¼ºç‰¹æ•ˆ -->
        <h1 id="main-title" th:if="${theme.config.index.title_settings.show_title}"
            th:class="${'text-6xl md:text-8xl font-bold mb-6 text-white animate-in fade-in zoom-in duration-700 effect-base ' + theme.config.index.title_settings.title_font + ' ' + theme.config.index.title_settings.style_effect}"
            style="animation-delay: 0.2s;"
            th:data-text="${#strings.isEmpty(theme.config.index.title_settings.custom_title) ? site.title : theme.config.index.title_settings.custom_title}"
            th:data-original-text="${#strings.isEmpty(theme.config.index.title_settings.custom_title) ? site.title : theme.config.index.title_settings.custom_title}"
            th:data-decoration-effect="${theme.config.index.title_settings.decoration_effect}">
            <span
                th:text="${#strings.isEmpty(theme.config.index.title_settings.custom_title) ? site.title : theme.config.index.title_settings.custom_title}">Sky
                Blog</span>
        </h1>

        <!-- å‰¯æ ‡é¢˜ - å¢å¼ºç‰¹æ•ˆ -->
        <div th:if="${theme.config.index.subtitle_settings.show_subtitle}"
            class="text-xl md:text-2xl mb-8 max-w-2xl animate-in text-white fade-in slide-in-from-bottom-4 duration-700"
            style="animation-delay: 0.4s;">
            <p id="subtitle"
                th:class="${'subtitle-base ' + theme.config.index.subtitle_settings.subtitle_font + ' ' + (theme.config.index.subtitle_settings.subtitle_effect == 'typewriter' ? 'typewriter' : (theme.config.index.subtitle_settings.subtitle_effect == 'gradient-flow' ? 'gradient-flow' : ''))}"
                th:text="${theme.config.index.subtitle_settings.subtitle_text}">
                è®°å½•ç”Ÿæ´»ï¼Œåˆ†äº«æ€è€ƒï¼Œæ¢ç´¢æ— é™å¯èƒ½
            </p>
        </div>

    </div>

    <!-- ç¬é—´è¯´è¯´æ¨¡å— - å¢å¼ºè§†è§‰æ•ˆæœ -->
    <div class="absolute bottom-20 left-1/2 transform -translate-x-1/2 z-30 w-full max-w-6xl px-4">
        <div class="floating-card shadow-2xl rounded-2xl border border-blue-500/30">
            <div class="p-4 lg:p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg lg:text-xl font-bold gradient-text flex items-center">
                        <span class="icon-[material-symbols--chat-bubble-outline] w-5 h-5 mr-2"></span>
                        ç¬é—´è¯´è¯´
                    </h3>
                    <div class="flex items-center space-x-3">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <button class="sky-btn btn-sm px-3 py-1 rounded-lg flex items-center space-x-1"
                            @click="document.getElementById('talk-modal').classList.remove('hidden')">
                            <span class="icon-[material-symbols--add-circle-outline] w-4 h-4 mr-1"></span>
                            <span class="hidden sm:inline">å‘å¸ƒè¯´è¯´</span>
                        </button>
                    </div>
                </div>

                <!-- ç§»åŠ¨ç«¯ï¼šé™æ€å¡ç‰‡æ˜¾ç¤º -->
                <div class="lg:hidden">
                    <div
                        class="floating-card shadow-lg rounded-xl p-4 transform -rotate-1 hover:rotate-0 transition-all duration-300">
                        <p class="text-sm mb-3 text-gray-200">ä»Šå¤©çš„å¤•é˜³ç‰¹åˆ«ç¾ï¼Œå¿ä¸ä½æƒ³è¦åˆ†äº«ç»™å¤§å®¶ ğŸŒ…</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">2å°æ—¶å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <span class="icon-[material-symbols--favorite-outline] w-3 h-3"></span>
                                <span>12</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- æ¡Œé¢ç«¯ï¼šç½‘æ ¼å¸ƒå±€ -->
                <div class="hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="floating-card shadow-lg rounded-xl p-4 transform -rotate-1 hover:rotate-0">
                        <p class="text-sm mb-3 text-gray-200">ä»Šå¤©çš„å¤•é˜³ç‰¹åˆ«ç¾ï¼Œå¿ä¸ä½æƒ³è¦åˆ†äº«ç»™å¤§å®¶ ğŸŒ…</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">2å°æ—¶å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z">
                                    </path>
                                </svg>
                                <span>12</span>
                            </button>
                        </div>
                    </div>

                    <div class="floating-card shadow-lg rounded-xl p-4 transform rotate-2 hover:rotate-0">
                        <p class="text-sm mb-3 text-gray-200">åˆšåˆšå®Œæˆäº†ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œæ„Ÿè§‰å¾ˆæœ‰æˆå°±æ„Ÿï¼</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">5å°æ—¶å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <span class="icon-[material-symbols--favorite-outline] w-3 h-3"></span>
                                <span>8</span>
                            </button>
                        </div>
                    </div>

                    <div class="floating-card shadow-lg rounded-xl p-4 transform -rotate-2 hover:rotate-0">
                        <p class="text-sm mb-3 text-gray-200">å‘¨æœ«çš„å’–å•¡æ—¶å…‰ï¼Œé…ä¸Šä¸€æœ¬å¥½ä¹¦ï¼Œå®Œç¾ â˜•ğŸ“š</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">1å¤©å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <span class="icon-[material-symbols--favorite-outline] w-3 h-3"></span>
                                <span>15</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¼§å½¢è¿‡æ¸¡ - ä¼˜é›…åŠ¨æ€ç‰ˆ -->
    <div class="absolute bottom-0 left-0 right-0 z-20 overflow-hidden"
        th:if="${theme.config.index.wave_transition_settings.show_wave_transition}">
        <!-- æ³¢æµªåŠ¨ç”»å±‚ -->
        <div class="wave-container" th:style="${'color: ' + theme.config.index.wave_transition_settings.wave_color}">
            <!-- ç¬¬ä¸€å±‚æ³¢æµª - æœ€æ…¢ -->
            <svg class="wave wave-1" viewBox="0 0 1440 320" preserveAspectRatio="none">
                <path class="wave-path"
                    d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
                    fill="currentColor" fill-opacity="0.2">
                </path>
            </svg>

            <!-- ç¬¬äºŒå±‚æ³¢æµª - ä¸­é€Ÿ -->
            <svg class="wave wave-2" viewBox="0 0 1440 320" preserveAspectRatio="none">
                <path class="wave-path"
                    d="M0,256L48,240C96,224,192,192,288,197.3C384,203,480,245,576,261.3C672,277,768,267,864,234.7C960,203,1056,149,1152,138.7C1248,128,1344,160,1392,176L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
                    fill="currentColor" fill-opacity="0.3">
                </path>
            </svg>

            <!-- ç¬¬ä¸‰å±‚æ³¢æµª - æœ€å¿« -->
            <svg class="wave wave-3" viewBox="0 0 1440 320" preserveAspectRatio="none">
                <path class="wave-path"
                    d="M0,224L48,213.3C96,203,192,181,288,186.7C384,192,480,224,576,218.7C672,213,768,171,864,165.3C960,160,1056,192,1152,208C1248,224,1344,224,1392,224L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
                    fill="currentColor" fill-opacity="0.5">
                </path>
            </svg>

            <!-- å®ä½“åº•å±‚ -->
            <svg class="wave wave-base" viewBox="0 0 1440 320" preserveAspectRatio="none">
                <path class="wave-path"
                    d="M0,288L48,272C96,256,192,224,288,213.3C384,203,480,213,576,229.3C672,245,768,267,864,261.3C960,256,1056,224,1152,218.7C1248,213,1344,235,1392,245.3L1440,256L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
                    fill="currentColor">
                </path>
            </svg>
        </div>

        <!-- å…‰ç‚¹è£…é¥° -->
        <div class="absolute bottom-0 left-0 right-0 h-32 pointer-events-none">
            <div class="wave-dot wave-dot-1"></div>
            <div class="wave-dot wave-dot-2"></div>
            <div class="wave-dot wave-dot-3"></div>
            <div class="wave-dot wave-dot-4"></div>
            <div class="wave-dot wave-dot-5"></div>
        </div>
    </div>
</div>



<!-- å‘å¸ƒè¯´è¯´æ¨¡æ€æ¡† -->
<div id="talk-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center hidden"
    onclick="if(event.target === this) document.getElementById('talk-modal').classList.add('hidden')">
    <div class="w-full max-w-lg mx-4 bg-gray-900 rounded-2xl border border-blue-500/30 shadow-2xl overflow-hidden">
        <!-- æ¨¡æ€æ¡†æ ‡é¢˜ -->
        <div class="bg-gray-800 px-6 py-4 border-b border-gray-700 flex items-center justify-between">
            <h3 class="text-lg font-bold gradient-text flex items-center">
                <iconify-icon icon="material-symbols:edit-outline" class="mr-2 text-xl"></iconify-icon>
                å‘å¸ƒæ–°è¯´è¯´
            </h3>
            <button class="text-gray-400 hover:text-white transition-colors"
                onclick="document.getElementById('talk-modal').classList.add('hidden')">
                <iconify-icon icon="material-symbols:close" class="text-xl"></iconify-icon>
            </button>
        </div>

        <!-- æ¨¡æ€æ¡†å†…å®¹ -->
        <div class="p-6">
            <form onsubmit="event.preventDefault(); showPublishSuccess();">
                <!-- æ–‡æœ¬è¾“å…¥åŒº -->
                <div class="mb-4">
                    <textarea id="talk-content"
                        class="w-full bg-gray-800 border border-gray-700 rounded-xl p-4 text-white placeholder-gray-400 focus:border-blue-500 focus:ring focus:ring-blue-500/20 transition-all"
                        rows="4" placeholder="åˆ†äº«ä½ çš„æƒ³æ³•..." maxlength="200"
                        oninput="document.getElementById('char-count').textContent = this.value.length + '/200'"></textarea>
                    <div class="flex justify-between items-center text-xs text-gray-400 mt-2">
                        <!-- è¡¨æƒ…é€‰æ‹©å™¨æŒ‰é’® -->
                        <button type="button" id="emoji-trigger-btn"
                            onclick="showEmojiSelector(document.getElementById('talk-content'))"
                            class="relative p-2 bg-gray-700 hover:bg-gray-600 rounded-full transition-all duration-200 hover:scale-110 active:scale-95">
                            <iconify-icon icon="material-symbols:sentiment-satisfied"
                                class="text-yellow-400 text-lg"></iconify-icon>
                        </button>

                        <!-- å­—æ•°ç»Ÿè®¡ -->
                        <span id="char-count">0/200</span>
                    </div>
                </div>


                <!-- æäº¤æŒ‰é’® -->
                <div class="flex justify-end">
                    <button type="submit" id="publish-btn"
                        class="sky-btn px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white transition-colors flex items-center space-x-2">
                        <iconify-icon icon="material-symbols:sentiment-very-satisfied" class="text-lg"></iconify-icon>
                        <span>å‘å¸ƒè¡¨æƒ…</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>