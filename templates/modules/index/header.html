<!-- å¢å¼ºç‰ˆè§†å·®æ²‰æµ¸Banner Header -->
<div class="relative min-h-screen overflow-hidden mt-[-50px] z-10" x-data="headerController()">
    <!-- å­—ä½“æŒ‰éœ€åŠ è½½è„šæœ¬ -->
    <script th:inline="javascript">
        (function () {
            // è·å–å½“å‰ä½¿ç”¨çš„æ ·å¼æ•ˆæœ
            const styleEffect = /*[[${theme.config.index.title_settings.style_effect}]]*/ 'none';

            // æ ¹æ®æ ·å¼æ•ˆæœåŠ¨æ€åŠ è½½å¯¹åº”çš„å­—ä½“æ–‡ä»¶
            if (styleEffect === 'effect-lxgw-wenkai-bright') {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = '/themes/theme-sky-blog-1/assets/fonts/LXGWBright-SemiLight/result.css';
                document.head.appendChild(link);
                console.log('å·²åŠ è½½éœé¹œæ–‡æ¥·äº®å­—ä½“');
            }
            else if (styleEffect === 'effect-siyuan-songti') {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = '/themes/theme-sky-blog-1/assets/fonts/æ€æºå±æ˜¾è‡»å®‹/result.css';
                document.head.appendChild(link);
                console.log('å·²åŠ è½½æ€æºå±æ˜¾è‡»å®‹å­—ä½“');
            }
            // è‹±æ–‡å­—ä½“å’Œé»˜è®¤å­—ä½“å·²åœ¨åŸºç¡€CSSä¸­åŠ è½½ï¼Œæ— éœ€åŠ¨æ€å¤„ç†
        })();
    </script>
    <!-- èƒŒæ™¯å±‚ï¼šå›¾ç‰‡BannerèƒŒæ™¯ -->
    <div class="absolute inset-0 z-0" th:if="${theme.config.index.background_settings.show_background}">
        <!-- ç¬¬ä¸€å±‚ï¼šåŸå§‹å›¾ç‰‡èƒŒæ™¯ -->
        <img class="absolute inset-0 w-full h-full object-cover transition-all duration-1000 filter blur-[0.5px]"
            th:src="${theme.config.index.background_settings.background_image}" alt="èƒŒæ™¯å›¾ç‰‡">

        <!-- ç¬¬äºŒå±‚ï¼šç»„åˆè’™ç‰ˆå®¹å™¨ -->
        <div class="absolute inset-0">
            <!-- é»˜è®¤åŸºç¡€è’™ç‰ˆ + æ¸å˜è’™ç‰ˆç»„åˆ -->
            <div class="absolute inset-0 bg-black/30 bg-gradient-to-b from-black/10 via-black/50 to-black/80"></div>

            <!-- æ»šåŠ¨æ·±é‚ƒæ•ˆæœè’™ç‰ˆ -->
            <div class="absolute inset-0 bg-black transition-opacity duration-500"
                :style="`opacity: ${scrolled ? 0.4 : 0.1}`">
            </div>
        </div>
    </div>

    <!-- è§†è§‰éœ‡æ’¼åŠ¨æ€èƒŒæ™¯å±‚ï¼šå½“éšè—å›¾ç‰‡èƒŒæ™¯æ—¶æ˜¾ç¤º -->
    <div class="absolute inset-0 z-0 overflow-hidden"
        th:unless="${theme.config.index.background_settings.show_background}">
        <!-- ç¬¬ä¸€å±‚ï¼šæ™ºèƒ½ä¸»é¢˜é€‚é…æ¸å˜åŸºåº• -->
        <div class="absolute inset-0 theme-adaptive-base"></div>

        <!-- ç¬¬äºŒå±‚ï¼šåŠ¨æ€è‰²å½©æµåŠ¨èƒŒæ™¯ -->
        <div class="absolute inset-0 dynamic-gradient-bg theme-adaptive-opacity"></div>

        <!-- ç¬¬ä¸‰å±‚ï¼šç²’å­å¼•åŠ›ç³»ç»Ÿ -->
        <div class="absolute inset-0 particle-system">
            <!-- ä¸»è¦ç²’å­ç¾¤ -->
            <div class="particle-cluster particle-cluster-1">
                <div class="particle particle-large particle-blue"></div>
                <div class="particle particle-medium particle-purple"></div>
                <div class="particle particle-small particle-cyan"></div>
                <div class="particle particle-tiny particle-white"></div>
            </div>

            <div class="particle-cluster particle-cluster-2">
                <div class="particle particle-large particle-purple"></div>
                <div class="particle particle-medium particle-cyan"></div>
                <div class="particle particle-small particle-blue"></div>
                <div class="particle particle-tiny particle-white"></div>
            </div>

            <div class="particle-cluster particle-cluster-3">
                <div class="particle particle-large particle-cyan"></div>
                <div class="particle particle-medium particle-blue"></div>
                <div class="particle particle-small particle-purple"></div>
                <div class="particle particle-tiny particle-white"></div>
            </div>

            <!-- è¿æ¥çº¿ç³»ç»Ÿ -->
            <svg class="absolute inset-0 w-full h-full particle-connections" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="connection-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.4" />
                        <stop offset="50%" style="stop-color:#8b5cf6;stop-opacity:0.6" />
                        <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:0.4" />
                    </linearGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="2" result="coloredBlur" />
                        <feMerge>
                            <feMergeNode in="coloredBlur" />
                            <feMergeNode in="SourceGraphic" />
                        </feMerge>
                    </filter>
                </defs>

                <!-- åŠ¨æ€è¿æ¥çº¿ -->
                <path class="connection-line connection-line-1" stroke="url(#connection-gradient)" stroke-width="1"
                    fill="none" filter="url(#glow)"></path>
                <path class="connection-line connection-line-2" stroke="url(#connection-gradient)" stroke-width="0.8"
                    fill="none" filter="url(#glow)"></path>
                <path class="connection-line connection-line-3" stroke="url(#connection-gradient)" stroke-width="0.6"
                    fill="none" filter="url(#glow)"></path>
            </svg>
        </div>

        <!-- ç¬¬å››å±‚ï¼šå¤šå±‚è§†å·®å‡ ä½• -->
        <div class="absolute inset-0 parallax-geometry">
            <!-- è¿œæ™¯å±‚ -->
            <div class="parallax-layer parallax-far">
                <div class="geometric-shape geo-hexagon geo-far-1"></div>
                <div class="geometric-shape geo-triangle geo-far-2"></div>
                <div class="geometric-shape geo-circle geo-far-3"></div>
            </div>

            <!-- ä¸­æ™¯å±‚ -->
            <div class="parallax-layer parallax-mid">
                <div class="geometric-shape geo-diamond geo-mid-1"></div>
                <div class="geometric-shape geo-pentagon geo-mid-2"></div>
                <div class="geometric-shape geo-star geo-mid-3"></div>
            </div>

            <!-- è¿‘æ™¯å±‚ -->
            <div class="parallax-layer parallax-near">
                <div class="geometric-shape geo-square geo-near-1"></div>
                <div class="geometric-shape geo-octagon geo-near-2"></div>
            </div>
        </div>

        <!-- ç¬¬äº”å±‚ï¼šå…‰æ•ˆç³»ç»Ÿ -->
        <div class="absolute inset-0 light-effects">
            <!-- ä¸»å…‰æº -->
            <div class="light-source light-primary"></div>
            <div class="light-source light-secondary"></div>
            <div class="light-source light-accent"></div>

            <!-- å…‰æŸæ•ˆæœ -->
            <div class="light-beam light-beam-1"></div>
            <div class="light-beam light-beam-2"></div>
            <div class="light-beam light-beam-3"></div>
        </div>

        <!-- ç¬¬å…­å±‚ï¼šæ·±åº¦è’™ç‰ˆ -->
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/10 to-black/40"></div>

        <!-- ç¬¬ä¸ƒå±‚ï¼šæ»šåŠ¨äº¤äº’è’™ç‰ˆ -->
        <div class="absolute inset-0 bg-black transition-opacity duration-700 ease-out"
            :style="`opacity: ${scrolled ? 0.25 : 0.02}`">
        </div>
    </div>

    <!-- ä¸­å±‚ï¼šæ ‡é¢˜å†…å®¹ -->
    <div class="relative z-20 flex flex-col items-center justify-center min-h-screen px-4 text-center"
        :style="`transform: translateY(${scrollOffset * 0.3}px); opacity: ${1 - scrollOffset * 0.001}`">

        <!-- ä¸»æ ‡é¢˜ - å¢å¼ºç‰¹æ•ˆ -->
        <h1 id="main-title" th:if="${theme.config.index.title_settings.show_title}"
            class="text-6xl md:text-8xl font-bold mb-6 text-white animate-in fade-in zoom-in duration-700 effect-base"
            style="animation-delay: 0.2s;"
            th:data-text="${#strings.isEmpty(theme.config.index.title_settings.custom_title) ? site.title : theme.config.index.title_settings.custom_title}"
            th:data-original-text="${#strings.isEmpty(theme.config.index.title_settings.custom_title) ? site.title : theme.config.index.title_settings.custom_title}"
            th:data-decoration-effect="${theme.config.index.title_settings.decoration_effect}"
            th:data-style-effect="${theme.config.index.title_settings.style_effect}">
            <span
                th:text="${#strings.isEmpty(theme.config.index.title_settings.custom_title) ? site.title : theme.config.index.title_settings.custom_title}">Sky
                Blog</span>
        </h1>

        <!-- å‰¯æ ‡é¢˜ - å¢å¼ºç‰¹æ•ˆ -->
        <div th:if="${theme.config.index.subtitle_settings.show_subtitle}"
            class="text-xl md:text-2xl mb-8 max-w-2xl animate-in text-white fade-in slide-in-from-bottom-4 duration-700"
            style="animation-delay: 0.4s;">
            <p id="subtitle"
                th:class="${theme.config.index.subtitle_settings.subtitle_effect == 'typewriter'} ? 'subtitle-glow typewriter' : 'subtitle-glow'"
                th:text="${theme.config.index.subtitle_settings.subtitle_text}">
                è®°å½•ç”Ÿæ´»ï¼Œåˆ†äº«æ€è€ƒï¼Œæ¢ç´¢æ— é™å¯èƒ½
            </p>
        </div>

    </div>

    <!-- ç¬é—´è¯´è¯´æ¨¡å— - å¢å¼ºè§†è§‰æ•ˆæœ -->
    <div class="absolute bottom-20 left-1/2 transform -translate-x-1/2 z-30 w-full max-w-6xl px-4">
        <div class="floating-card shadow-2xl rounded-2xl border border-blue-500/30">
            <div class="p-4 lg:p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg lg:text-xl font-bold gradient-text flex items-center">
                        <span class="icon-[material-symbols--chat-bubble-outline] w-5 h-5 mr-2"></span>
                        ç¬é—´è¯´è¯´
                    </h3>
                    <div class="flex items-center space-x-3">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <button class="sky-btn btn-sm px-3 py-1 rounded-lg flex items-center space-x-1"
                            @click="document.getElementById('talk-modal').classList.remove('hidden')">
                            <span class="icon-[material-symbols--add-circle-outline] w-4 h-4 mr-1"></span>
                            <span class="hidden sm:inline">å‘å¸ƒè¯´è¯´</span>
                        </button>
                    </div>
                </div>

                <!-- ç§»åŠ¨ç«¯ï¼šé™æ€å¡ç‰‡æ˜¾ç¤º -->
                <div class="lg:hidden">
                    <div
                        class="floating-card shadow-lg rounded-xl p-4 transform -rotate-1 hover:rotate-0 transition-all duration-300">
                        <p class="text-sm mb-3 text-gray-200">ä»Šå¤©çš„å¤•é˜³ç‰¹åˆ«ç¾ï¼Œå¿ä¸ä½æƒ³è¦åˆ†äº«ç»™å¤§å®¶ ğŸŒ…</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">2å°æ—¶å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <span class="icon-[material-symbols--favorite-outline] w-3 h-3"></span>
                                <span>12</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- æ¡Œé¢ç«¯ï¼šç½‘æ ¼å¸ƒå±€ -->
                <div class="hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="floating-card shadow-lg rounded-xl p-4 transform -rotate-1 hover:rotate-0">
                        <p class="text-sm mb-3 text-gray-200">ä»Šå¤©çš„å¤•é˜³ç‰¹åˆ«ç¾ï¼Œå¿ä¸ä½æƒ³è¦åˆ†äº«ç»™å¤§å®¶ ğŸŒ…</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">2å°æ—¶å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z">
                                    </path>
                                </svg>
                                <span>12</span>
                            </button>
                        </div>
                    </div>

                    <div class="floating-card shadow-lg rounded-xl p-4 transform rotate-2 hover:rotate-0">
                        <p class="text-sm mb-3 text-gray-200">åˆšåˆšå®Œæˆäº†ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œæ„Ÿè§‰å¾ˆæœ‰æˆå°±æ„Ÿï¼</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">5å°æ—¶å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <span class="icon-[material-symbols--favorite-outline] w-3 h-3"></span>
                                <span>8</span>
                            </button>
                        </div>
                    </div>

                    <div class="floating-card shadow-lg rounded-xl p-4 transform -rotate-2 hover:rotate-0">
                        <p class="text-sm mb-3 text-gray-200">å‘¨æœ«çš„å’–å•¡æ—¶å…‰ï¼Œé…ä¸Šä¸€æœ¬å¥½ä¹¦ï¼Œå®Œç¾ â˜•ğŸ“š</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-400">1å¤©å‰</span>
                            <button class="sky-btn btn-xs px-3 py-1 rounded-full flex items-center space-x-1">
                                <span class="icon-[material-symbols--favorite-outline] w-3 h-3"></span>
                                <span>15</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¼§å½¢è¿‡æ¸¡ -->
    <div class="absolute bottom-0 left-0 right-0 z-20">
        <svg class="w-full h-16 text-gray-900" viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path
                d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z"
                opacity=".25" fill="currentColor"></path>
            <path
                d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z"
                opacity=".5" fill="currentColor"></path>
            <path
                d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z"
                fill="currentColor"></path>
        </svg>
    </div>
</div>



<!-- å‘å¸ƒè¯´è¯´æ¨¡æ€æ¡† -->
<div id="talk-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center hidden"
    onclick="if(event.target === this) document.getElementById('talk-modal').classList.add('hidden')">
    <div class="w-full max-w-lg mx-4 bg-gray-900 rounded-2xl border border-blue-500/30 shadow-2xl overflow-hidden">
        <!-- æ¨¡æ€æ¡†æ ‡é¢˜ -->
        <div class="bg-gray-800 px-6 py-4 border-b border-gray-700 flex items-center justify-between">
            <h3 class="text-lg font-bold gradient-text flex items-center">
                <iconify-icon icon="material-symbols:edit-outline" class="mr-2 text-xl"></iconify-icon>
                å‘å¸ƒæ–°è¯´è¯´
            </h3>
            <button class="text-gray-400 hover:text-white transition-colors"
                onclick="document.getElementById('talk-modal').classList.add('hidden')">
                <iconify-icon icon="material-symbols:close" class="text-xl"></iconify-icon>
            </button>
        </div>

        <!-- æ¨¡æ€æ¡†å†…å®¹ -->
        <div class="p-6">
            <form onsubmit="event.preventDefault(); showPublishSuccess();">
                <!-- æ–‡æœ¬è¾“å…¥åŒº -->
                <div class="mb-4">
                    <textarea id="talk-content"
                        class="w-full bg-gray-800 border border-gray-700 rounded-xl p-4 text-white placeholder-gray-400 focus:border-blue-500 focus:ring focus:ring-blue-500/20 transition-all"
                        rows="4" placeholder="åˆ†äº«ä½ çš„æƒ³æ³•..." maxlength="200"
                        oninput="document.getElementById('char-count').textContent = this.value.length + '/200'"></textarea>
                    <div class="flex justify-between items-center text-xs text-gray-400 mt-2">
                        <!-- è¡¨æƒ…é€‰æ‹©å™¨æŒ‰é’® -->
                        <button type="button" id="emoji-trigger-btn"
                            onclick="showEmojiSelector(document.getElementById('talk-content'))"
                            class="relative p-2 bg-gray-700 hover:bg-gray-600 rounded-full transition-all duration-200 hover:scale-110 active:scale-95">
                            <iconify-icon icon="material-symbols:sentiment-satisfied"
                                class="text-yellow-400 text-lg"></iconify-icon>
                        </button>

                        <!-- å­—æ•°ç»Ÿè®¡ -->
                        <span id="char-count">0/200</span>
                    </div>
                </div>


                <!-- æäº¤æŒ‰é’® -->
                <div class="flex justify-end">
                    <button type="submit" id="publish-btn"
                        class="sky-btn px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-500 text-white transition-colors flex items-center space-x-2">
                        <iconify-icon icon="material-symbols:sentiment-very-satisfied" class="text-lg"></iconify-icon>
                        <span>å‘å¸ƒè¡¨æƒ…</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>