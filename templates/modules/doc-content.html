<!-- 文档内容页 - 适配主题样式 -->
<div th:fragment="content" class="max-w-7xl mx-auto px-4 py-8">
  <div class="flex gap-8">
    
    <!-- 左侧文档树 -->
    <aside class="hidden lg:block w-64 shrink-0">
      <div class="card bg-base-100 shadow-sm rounded-lg p-4 sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto scrollbar-thin">
        <a th:href="${project.status.permalink}" class="font-semibold text-base text-base-content mb-4 flex items-center gap-2 hover:text-primary transition-colors">
          <span class="icon-[heroicons--book-open] w-5 h-5 shrink-0"></span>
          <span class="truncate" th:text="${project.spec.displayName}">文档项目</span>
        </a>
        <ul class="menu bg-transparent p-0">
          <th:block th:replace="~{modules/doc-content :: tree-item(docTrees=${docTrees})}" />
        </ul>
      </div>
    </aside>

    <!-- 主内容区 -->
    <main class="flex-1 min-w-0 overflow-hidden">
      <!-- 面包屑 -->
      <div class="breadcrumbs text-sm mb-6">
        <ul>
          <li>
            <a th:href="${project.status.permalink}" class="text-base-content/70 hover:text-primary flex items-center gap-1">
              <span class="icon-[heroicons--home] w-4 h-4"></span>
              首页
            </a>
          </li>
          <li th:each="crumb : ${crumbs}">
            <a th:href="${crumb.status.permalink}" th:text="${crumb.spec.title}" class="text-base-content/70 hover:text-primary"></a>
          </li>
        </ul>
      </div>

      <!-- 文档卡片 -->
      <article class="flex-1 min-w-0 overflow-hidden">
        <div class="prose prose-lg max-w-none font-sans" style="font-size: 16px; line-height: 1.8;">
          <!-- 文档标题 -->
          <h1 class="text-2xl lg:text-3xl font-bold text-base-content mb-6 pb-4 border-b border-base-200" th:text="${docTree.spec.title}">文档标题</h1>
          
          <!-- 文档正文内容 - 使用和文章页相同的 ID 和样式类 -->
          <div id="article-content" 
               th:classappend="${'article-style-' + (theme.config.article.content_style.style_theme ?: 'github')}"
               class="prose prose-lg max-w-none"
               th:utext="${docInfo.content.content}">
            文档内容
          </div>
        </div>
      </article>

      <!-- 上一篇 / 下一篇 -->
      <nav th:if="${linkNavigation}" class="flex flex-col sm:flex-row justify-between gap-4 mt-8 pt-6 border-t border-base-200">
        <a th:if="${linkNavigation.hasPrevious}" 
           th:href="${linkNavigation.previous.link}" 
           class="flex-1 card bg-base-100 shadow-sm rounded-lg p-4 hover:shadow-md hover:border-primary border border-transparent transition-all group">
          <div class="text-xs text-base-content/60 flex items-center gap-1">
            <span class="icon-[heroicons--arrow-left] w-3 h-3"></span>
            上一篇
          </div>
          <div class="font-medium text-base-content group-hover:text-primary mt-1 transition-colors truncate" th:text="${linkNavigation.previous.title}">上一篇标题</div>
        </a>
        <a th:if="${linkNavigation.hasNext}" 
           th:href="${linkNavigation.next.link}" 
           class="flex-1 card bg-base-100 shadow-sm rounded-lg p-4 hover:shadow-md hover:border-primary border border-transparent transition-all text-right group">
          <div class="text-xs text-base-content/60 flex items-center gap-1 justify-end">
            下一篇
            <span class="icon-[heroicons--arrow-right] w-3 h-3"></span>
          </div>
          <div class="font-medium text-base-content group-hover:text-primary mt-1 transition-colors truncate" th:text="${linkNavigation.next.title}">下一篇标题</div>
        </a>
      </nav>
    </main>

    <!-- 右侧目录 - 使用和文章页相同的 ID -->
    <aside class="right-sidebar w-80 space-y-6 hidden xl:block">
      <div id="toc-card" class="card bg-base-100 shadow-sm rounded-lg p-4 sidebar-card sticky top-20 z-10">
        <h3 class="font-semibold text-lg mb-4 flex items-center gap-2 text-base-content">
          <span class="icon-[heroicons--list-bullet] w-5 h-5"></span>
          <span>目录</span>
        </h3>
        <div class="toc-container overflow-y-auto pr-2 scrollbar-thin">
          <nav id="toc-nav" class="space-y-1" role="navigation" aria-label="文档目录">
            <!-- 目录将由 JavaScript 自动生成 -->
          </nav>
        </div>
      </div>
    </aside>

  </div>
</div>

<!-- 递归渲染文档树 -->
<th:block th:fragment="tree-item(docTrees)">
  <li th:each="node : ${docTrees}">
    <!-- 文档链接 -->
    <a th:if="${node.spec.type == 'DOC'}"
       th:href="${node.status.permalink}" 
       th:title="${node.spec.title}"
       class="truncate block"
       th:classappend="${node.metadata.name == docTree.metadata.name} ? 'active bg-primary text-primary-content' : ''">
      <span th:text="${node.spec.title}" class="truncate">标题</span>
    </a>
    <!-- 目录（可展开） -->
    <details th:if="${node.spec.type == 'TREE'}" 
             th:open="${#arrays.contains(crumbs, node) || node.metadata.name == docTree.metadata.name}">
      <summary class="truncate" th:title="${node.spec.title}">
        <span th:text="${node.spec.title}" class="truncate">分类标题</span>
      </summary>
      <ul th:if="${node.children != null && !node.children.isEmpty()}">
        <th:block th:replace="~{modules/doc-content :: tree-item(docTrees=${node.children})}" />
      </ul>
    </details>
  </li>
</th:block>
