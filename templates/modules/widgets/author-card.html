<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">

<!-- ========================================== -->
<!--   作者卡片组件 - 简约点缀风格               -->
<!-- ========================================== -->

<th:block th:fragment="card"
  th:with="currentUser = ${contributorFinder.getContributor(#authentication.name)},
           isLoggedIn = ${currentUser != null and !#strings.equals(currentUser.name, 'anonymousUser')}">

<!-- ========== 已登录用户卡片 ========== -->
<a th:if="${isLoggedIn}" href="/uc"
  class="block bg-base-100/80 backdrop-blur-xl shadow-md border border-base-content/5 rounded-2xl p-4 group hover:shadow-lg hover:border-primary/20 transition-all duration-300 relative overflow-hidden">
  
  <!-- 背景装饰 -->
  <div class="absolute -top-6 -right-6 w-20 h-20 bg-gradient-to-br from-success/10 to-primary/5 rounded-full blur-xl opacity-60 group-hover:opacity-100 transition-opacity"></div>
  
  <div class="relative flex items-center gap-3">
    <!-- 头像 -->
    <div class="relative shrink-0">
      <div class="w-10 h-10 rounded-xl overflow-hidden bg-base-200 ring-2 ring-base-content/5 group-hover:ring-primary/30 transition-all">
        <img th:src="${currentUser.avatar}" th:if="${currentUser.avatar != null and !#strings.isEmpty(currentUser.avatar)}" alt="avatar" class="w-full h-full object-cover" />
        <img th:src="${site.logo}" th:unless="${currentUser.avatar != null and !#strings.isEmpty(currentUser.avatar)}" alt="avatar" class="w-full h-full object-cover" />
      </div>
      <!-- 在线状态点 -->
      <div class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-success rounded-full ring-2 ring-base-100"></div>
      </div>
    
    <!-- 信息 -->
    <div class="flex-1 min-w-0">
      <h3 class="text-sm font-semibold text-base-content truncate" th:text="${currentUser.displayName}">用户</h3>
      <p th:if="${currentUser.bio != null and !#strings.isEmpty(currentUser.bio)}" 
         class="text-xs text-base-content/50 truncate mt-0.5"
         th:text="${currentUser.bio}">描述</p>
      <p th:unless="${currentUser.bio != null and !#strings.isEmpty(currentUser.bio)}" 
         class="text-xs text-base-content/50 mt-0.5">已登录</p>
    </div>

    <!-- 箭头 -->
    <span class="icon-[heroicons--chevron-right] w-4 h-4 text-base-content/30 group-hover:text-primary group-hover:translate-x-0.5 transition-all shrink-0"></span>
  </div>
</a>

<!-- ========== 未登录访客卡片 ========== -->
<a th:unless="${isLoggedIn}" href="/about"
  class="block bg-base-100/80 backdrop-blur-xl shadow-md border border-base-content/5 rounded-2xl p-4 group hover:shadow-lg hover:border-primary/20 transition-all duration-300 relative overflow-hidden"
  th:with="profile = ${theme.config.about_settings.profile}">
  
  <!-- 背景装饰 -->
  <div class="absolute -top-6 -right-6 w-20 h-20 bg-gradient-to-br from-primary/10 to-accent/5 rounded-full blur-xl opacity-60 group-hover:opacity-100 transition-opacity"></div>
  
  <div class="relative flex items-center gap-3">
    <!-- 头像 -->
    <div class="relative shrink-0">
      <div class="w-10 h-10 rounded-xl overflow-hidden bg-base-200 ring-2 ring-base-content/5 group-hover:ring-primary/30 transition-all">
        <img th:src="${profile?.avatar != null and !profile.avatar.isEmpty()} ? ${profile.avatar} : ${site.logo}" alt="avatar" class="w-full h-full object-cover" />
      </div>
      <!-- 装饰点 -->
      <div class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-primary/60 rounded-full ring-2 ring-base-100"></div>
    </div>

    <!-- 信息 -->
    <div class="flex-1 min-w-0">
      <h3 class="text-sm font-semibold text-base-content truncate" 
          th:text="${profile?.nickname != null and !profile.nickname.isEmpty()} ? ${profile.nickname} : ${site.title}">昵称</h3>
      <p th:if="${profile?.bio != null and !profile.bio.isEmpty()}" 
         class="text-xs text-base-content/50 truncate mt-0.5"
         th:text="${profile.bio}">描述</p>
      <p th:unless="${profile?.bio != null and !profile.bio.isEmpty()}" 
         class="text-xs text-base-content/50 mt-0.5">了解更多</p>
    </div>
    
    <!-- 箭头 -->
    <span class="icon-[heroicons--chevron-right] w-4 h-4 text-base-content/30 group-hover:text-primary group-hover:translate-x-0.5 transition-all shrink-0"></span>
  </div>
</a>

</th:block>

</html>
